<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>作品選択 - 走れ文学</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>
<body class="start-page-body">
    <audio id="bgm-player" loop autoplay>
        <source src="{{ url_for('static', filename='assets/sounds/start.mp3') }}" type="audio/mpeg">
    </audio>

    <div class="literary-background">
        {{ background_text }}
    </div>

    <div class="start-container">
        <h1>登場作品のあらすじ</h1>
        <p style="color: #666; margin-bottom: 20px;">読みたい作品を選択してください</p>

        {% for title in titles %}
        <div class="menu-item">
            <a href="{{ url_for('synopsis_detail', work_id=title.id) }}"
               style="
                   display: flex;
                   align-items: center;
                   justify-content: center;
                   gap: 15px;
               ">
                <img
                    src="{{ url_for(
                        'static',
                        filename='assets/characters/' ~ work_icons[title.id]
                    ) }}"
                    alt="{{ title.name }} アイコン"
                    style="
                        width: 48px;
                        height: 48px;
                        object-fit: contain;
                    "
                >
                <span>{{ title.name }}</span>
            </a>
        </div>
        {% endfor %}

        <div class="menu-item" style="margin-top: 30px;">
            <a href="{{ url_for('index') }}"
               style="background-color: #95a5a6; min-width: 150px; font-size: 1.2em; padding: 10px 30px;">
                戻る
            </a>
        </div>
    </div>

    <script>
        window.addEventListener('DOMContentLoaded', () => {
            const audio = document.getElementById('bgm-player');
            if (audio) {
                audio.play().catch(e => console.log("Playback blocked"));
            }
        });
    </script>
</body>
</html>
